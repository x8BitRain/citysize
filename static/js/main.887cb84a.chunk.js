(this.webpackJsonpcitysize=this.webpackJsonpcitysize||[]).push([[0],{28:function(e,t,a){e.exports=a(58)},33:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(24),s=a.n(l),r=(a(33),a(5)),c=a(6),i=a(8),u=a(7),h=a(9),p=a(59),d=a(3),m=a.n(d),y=(a(34),a(35),a(14)),f=a.n(y),g=a(60),b=a(12),j=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createLeafletElement",value:function(e){return m.a.mapboxGL(e)}}]),t}(g.a);j.propTypes={accessToken:f.a.string.isRequired,style:f.a.string},j.defaultProps={style:"mapbox://styles/mapbox/streets-v9"};var v,E=Object(b.b)(j),k=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return[e,e]},O=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.props.returnResult(e.target)},a.drawResults=function(){return a.props.searchResults.map((function(e){return o.a.createElement("div",{className:"searchResult",value:e.place_id,onClick:a.handleClick,key:e.place_id},o.a.createElement("h4",null,e.display_name),o.a.createElement("p",null,"administrative"===e.type?"Administrative Border":O(e.type)),o.a.createElement("p",null,e.lat),o.a.createElement("p",null,e.lon))}))},a.state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.searchResults.length>0?this.drawResults():null)}}]),t}(o.a.Component),S=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"loader"},o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null))}}]),t}(o.a.Component),x=a(26),R=a.n(x),M={type:"Feature",name:"",bbox:[],properties:{},geometry:{type:"Polygon",coordinates:[[]]}},w=function(e){return"MultiPolygon"===e[0].geojson.type?v=e[0].geojson.coordinates[0][0]:"Polygon"===e[0].geojson.type&&(v=e[0].geojson.coordinates[0]),M.geometry.coordinates[0]=v,M.name=e[0].display_name.split(",")[0],M.bbox=e[0].boundingbox,M},F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSearchResultClick=function(e){var t=e.getAttribute("value"),n=a.state.searchResults.filter((function(e){return e.place_id===parseInt(t)}));a.props.addOutline(w(n),n[0].lat,n[0].lon,n[0].boundingbox)},a.handleSearch=function(e){e.target.value.length>3?(a.setState({loading:!0}),R.a.get("https://nominatim.openstreetmap.org/search.php?q=".concat(e.target.value,"&polygon_geojson=1&format=json&limit=5")).catch((function(e){console.log(e)})).then((function(e){var t=e.data.filter((function(e){return e.geojson?"MultiPolygon"===e.geojson.type||"Polygon"===e.geojson.type:null}));a.setState({searchResults:t,loading:!1})}))):e.target.value.length<3&&a.setState({searchResults:[]})},a.setFocus=function(e){"mouseenter"===e.type?a.setState({focused:!0}):"mouseleave"===e.type&&a.setState({focused:!1})},a.toggleUI=function(e){"blur"===e.type&&!0===a.state.focused?a.focusInput():"blur"===e.type&&!1===a.state.focused?a.setState({searchStyle:{display:"none"}}):"focus"===e.type&&a.setState({searchStyle:{display:"block"}})},a.focusInput=function(){a.refs.searchbar.focus()},a.doThing=function(){},a.state={searchResults:[],searchStyle:{display:"block"},focused:!0,loading:!1,style:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.focusInput(),this.refs.searchbar.onkeypress=function(e){13===(e.charCode||e.keyCode||0)&&e.preventDefault()}}},{key:"render",value:function(){return o.a.createElement("div",{onChange:this.handleSearch,onClick:this.collapseSearch,onMouseEnter:this.setFocus,onMouseLeave:this.setFocus,id:"interface"},o.a.createElement("div",{id:"searchBox",onMouseEnter:this.setFocus,style:this.state.style},o.a.createElement("input",{ref:"searchbar",type:"search",placeholder:"Search locations, cities, countries, states...",onMouseEnter:this.setFocus,onBlur:this.toggleUI,onFocus:this.toggleUI,onClick:this.doThing}),o.a.createElement("div",{id:"searchIconContainer"},o.a.createElement("div",{id:"searchIcon"})),o.a.createElement("div",{id:"searchResults",onMouseEnter:this.setFocus,style:this.state.searchStyle},this.state.loading?o.a.createElement(S,null):null,o.a.createElement(C,{onClick:this.focusInput,returnResult:this.handleSearchResultClick,searchResults:this.state.searchResults}))))}}]),t}(o.a.Component),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggleDisplay=function(){a.setState({display:!1})},a.drawModal=function(){return o.a.createElement("div",{className:"modal"},o.a.createElement("div",{id:"close",onClick:a.toggleDisplay}),o.a.createElement("h4",null,"How it works:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Search for any location like a city, country or even a building."),o.a.createElement("li",null,"Select a location from the search list to add it to the map."),o.a.createElement("li",null,"Drag the outline around the map and compare it to other locations!"),o.a.createElement("li",null,"Bugs? ",o.a.createElement("a",{href:"https://github.com/x8BitRain/citysize"},"Readme!"))))},a.state={display:!0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.alreadyVisited?this.setState({display:!1}):(localStorage.alreadyVisited=!0,this.setState({display:!0}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.display?this.drawModal():null)}}]),t}(o.a.Component),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).setCity=function(e,t,n,o){e,a.addCityLayer(e,t,n,o)},a.addCityLayer=function(e,t,n,o){var l=a.refs.map.leafletElement;l.flyToBounds([[o[0],o[2]],[o[1],o[3]]]);var s=k();m.a.trueSize(e,{markerDiv:"<h2 style='text-shadow: 0px 0px 14px rgba(255,255,255,1);'>".concat(e.name,"</h2>"),iconAnchor:[35,35],fill:!0,fillColor:s[0],fillOpacity:.15,color:"black",weight:3,opacity:1,stroke:!0}).addTo(l)},a.handleClick=function(e){console.log(e.latlng)},a.state={lat:30,lng:0,zoom:3,selectedCity:"",focus:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{center:e,zoom:this.state.zoom,minZoom:"3",zoomSnap:"0.25",onClick:this.handleClick,ref:"map",useFlyTo:!0,attributionControl:!0},o.a.createElement(E,{accessToken:"pk.eyJ1IjoiZGJlbGxidHIiLCJhIjoiY2p5dTF5OXltMDFrOTNjbWxqdjZ5NmV2MCJ9.kkIqnzU12LF90W8yr-jsJw",style:"mapbox://styles/mapbox/light-v10",attribution:'\xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> | \xa9 <a href="https://www.mapbox.com/">MapBox</a> | <a href="https://https://github.com/x8BitRain/citysize/">GitHub</a>'})),o.a.createElement(F,{addOutline:this.setCity}),o.a.createElement(I,null))}}]),t}(o.a.Component);var B=function(){return o.a.createElement(z,null)};s.a.render(o.a.createElement(B,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.887cb84a.chunk.js.map