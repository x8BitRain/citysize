(this.webpackJsonpcitysize=this.webpackJsonpcitysize||[]).push([[0],{28:function(e,t,n){e.exports=n(58)},33:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(24),r=n.n(s),l=(n(33),n(5)),c=n(6),i=n(10),u=n(7),h=n(11),p=n(59),d=n(3),f=n.n(d),m=(n(34),n(35),n(14)),y=n.n(m),g=n(60),b=n(12),j=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createLeafletElement",value:function(e){return f.a.mapboxGL(e)}}]),t}(g.a);j.propTypes={accessToken:y.a.string.isRequired,style:y.a.string},j.defaultProps={style:"mapbox://styles/mapbox/streets-v9"};var v,k=Object(b.b)(j),E=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return[e,e]},O=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){n.props.returnResult(e.target)},n.drawResults=function(){return n.props.searchResults.map((function(e){return o.a.createElement("div",{className:"searchResult",value:e.place_id,onClick:n.handleClick,key:e.place_id},o.a.createElement("h4",null,e.display_name),o.a.createElement("p",null,"administrative"===e.type?"Administrative Border":O(e.type)),o.a.createElement("p",null,e.lat),o.a.createElement("p",null,e.lon))}))},n.state={},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.searchResults.length>0?this.drawResults():null)}}]),t}(o.a.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"loader"},o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null))}}]),t}(o.a.Component),R=n(26),F=n.n(R),I={type:"Feature",name:"",properties:{},geometry:{type:"Polygon",coordinates:[[]]}},M=function(e){return"MultiPolygon"===e[0].geojson.type?v=e[0].geojson.coordinates[0][0]:"Polygon"===e[0].geojson.type&&(v=e[0].geojson.coordinates[0]),I.geometry.coordinates[0]=v,I.name=e[0].display_name.split(",")[0],I},w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSearchResultClick=function(e){var t=e.getAttribute("value"),a=n.state.searchResults.filter((function(e){return e.place_id===parseInt(t)}));M(a),n.props.addOutline(M(a),a[0].lat,a[0].lon)},n.handleSearch=function(e){e.target.value.length>3?(n.setState({loading:!0}),F.a.get("https://nominatim.openstreetmap.org/search.php?q=".concat(e.target.value,"&polygon_geojson=1&format=json&limit=5")).catch((function(e){console.log(e)})).then((function(e){var t=e.data.filter((function(e){return e.geojson?"MultiPolygon"===e.geojson.type||"Polygon"===e.geojson.type:null}));n.setState({searchResults:t,loading:!1})}))):e.target.value.length<3&&n.setState({searchResults:[]})},n.setFocus=function(e){"mouseenter"===e.type?n.setState({focused:!0}):"mouseleave"===e.type&&n.setState({focused:!1})},n.toggleUI=function(e){"blur"===e.type&&!0===n.state.focused?n.focusInput():"blur"===e.type&&!1===n.state.focused?n.setState({searchStyle:{display:"none"}}):"focus"===e.type&&n.setState({searchStyle:{display:"block"}})},n.focusInput=function(){n.refs.searchbar.focus()},n.doThing=function(){},n.state={searchResults:[],searchStyle:{display:"block"},focused:!0,loading:!1,style:{}},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.focusInput(),this.refs.searchbar.onkeypress=function(e){13===(e.charCode||e.keyCode||0)&&e.preventDefault()}}},{key:"render",value:function(){return o.a.createElement("div",{onChange:this.handleSearch,onClick:this.collapseSearch,onMouseEnter:this.setFocus,onMouseLeave:this.setFocus,id:"interface"},o.a.createElement("div",{id:"searchBox",onMouseEnter:this.setFocus,style:this.state.style},o.a.createElement("input",{ref:"searchbar",type:"search",placeholder:"Search locations, cities, countries, states...",onMouseEnter:this.setFocus,onBlur:this.toggleUI,onFocus:this.toggleUI,onClick:this.doThing}),o.a.createElement("div",{id:"searchIconContainer"},o.a.createElement("div",{id:"searchIcon"})),o.a.createElement("div",{id:"searchResults",onMouseEnter:this.setFocus,style:this.state.searchStyle},this.state.loading?o.a.createElement(S,null):null,o.a.createElement(C,{onClick:this.focusInput,returnResult:this.handleSearchResultClick,searchResults:this.state.searchResults}))))}}]),t}(o.a.Component),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).setCity=function(e,t,a){e,n.addCityLayer(e,t,a)},n.addCityLayer=function(e,t,a){var o=n.refs.map.leafletElement;console.log(e),o.flyTo([t,a],4);var s=E();f.a.trueSize(e,{markerDiv:"<h2>".concat(e.name,"</h2>"),iconAnchor:[35,35],fill:!0,fillColor:s[0],fillOpacity:.15,color:"black",weight:3,opacity:1,stroke:!0}).addTo(o)},n.handleClick=function(e){console.log(e.latlng)},n.state={lat:30,lng:0,zoom:3,selectedCity:"",focus:{}},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{center:e,zoom:this.state.zoom,minZoom:"2.5",zoomSnap:"0.25",onClick:this.handleClick,ref:"map",useFlyTo:!0,attributionControl:!0},o.a.createElement(k,{accessToken:"pk.eyJ1IjoiZGJlbGxidHIiLCJhIjoiY2p5dTF5OXltMDFrOTNjbWxqdjZ5NmV2MCJ9.kkIqnzU12LF90W8yr-jsJw",style:"mapbox://styles/mapbox/light-v10",attribution:'\xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> | \xa9 <a href="https://www.mapbox.com/">MapBox</a>'})),o.a.createElement(w,{addOutline:this.setCity}))}}]),t}(o.a.Component);var T=function(){return o.a.createElement(x,null)};r.a.render(o.a.createElement(T,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.de14dde0.chunk.js.map